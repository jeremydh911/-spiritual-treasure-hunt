name: Godot tests

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  godot-test:
    name: godot-test
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Run Godot headless tests (script)
        run: |
          chmod +x ./scripts/run-godot-tests.sh || true
          ./scripts/run-godot-tests.sh

  godot-headless-try:
    name: attempt-godot-headless
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Try to run Godot (non-fatal)
        run: |
          echo "Attempting to run Godot tests (will succeed gracefully if Godot not present)..."
          ./scripts/run-godot-tests.sh || true
